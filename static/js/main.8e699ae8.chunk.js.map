{"version":3,"sources":["assets/logo.svg","components/common/Select.js","components/common/UpgradeButton.js","constants.js","utils/update-url.js","utils/device-sizes.js","utils.js","ReleaseProvider.jsx","hooks/fetch-release-versions.js","components/common/VersionSelector.js","components/common/Diff/DiffCommentReminder.js","components/common/DownloadFileButton.js","components/common/ViewFileButton.js","components/common/Diff/DiffHeader.js","components/common/Markdown.js","components/common/Diff/DiffComment.js","components/common/Diff/Diff.js","components/common/Diff/DiffSection.js","components/common/Diff/DiffLoading.js","components/common/UpgradeSupportAlert.js","components/common/UsefulContentSection.js","components/common/BinaryDownload.js","components/common/Diff/DiffViewStyleOptions.js","components/common/CompletedFilesCounter.js","components/common/RawDiffLinkButton.js","hooks/fetch-diff.js","components/common/DiffViewer.js","components/common/TroubleshootingGuides.js","components/common/TroubleshootingGuidesButton.js","components/pages/Home.js","hooks/get-package-name-from-url.js","hooks/get-language-from-url.js","App.jsx","serviceWorker.js","index.jsx"],"names":["module","exports","Option","AntdSelect","SelectBoxContainer","SelectBox","Select","title","options","props","size","map","version","createApp","key","value","testIDs","Container","Button","AntdButton","UpgradeButton","React","forwardRef","ref","onShowDiff","type","data-testid","onClick","PACKAGE_NAMES","RN","RNM","RNW","BACKSTAGE","LANGUAGE_NAMES","CPP","CS","RN_DIFF_REPOSITORIES","RN_CHANGELOG_URLS","DIFF_BASE_BRANCH","process","REACT_APP_DIFF_BASE_BRANCH","updateURL","packageName","language","isPackageNameDefinedInURL","fromVersion","toVersion","pageURL","window","location","href","replace","search","newURL","packageNameInURL","languageInURL","history","replaceState","deviceSizes","getRNDiffRepository","getReleasesFileURL","getDiffURL","getBinaryFileURL","path","branch","removeAppPathPrefix","appName","RegExp","replaceWithProvidedAppName","toLowerCase","getVersionsContentInDiff","versions","cleanedToVersion","semver","valid","coerce","filter","cleanedVersion","compare","includes","getChangelogURL","getTransitionDuration","duration","navigator","webdriver","ReleasesContext","createContext","isDone","isLoading","releases","undefined","ReleasesProvider","memo","children","useState","setIsLoading","setIsDone","setReleases","useEffect","a","fetch","json","response","_releases","Object","entries","sort","b","fetchReleaseVersions","useFetchReleases","selectedVersions","setSelectedVersions","Provider","useReleases","useContext","Selectors","FromVersionSelector","ToVersionSelector","popover","cloneElement","compareReleaseCandidateVersions","versionToCompare","diff","getReleasedVersionsWithCandidates","releasedVersions","latestVersion","showReleaseCandidates","isToVersionAReleaseCandidate","prerelease","isLatestAReleaseCandidate","releasedVersion","checkIfVersionIsALatestRC","getReleasedVersions","minVersion","maxVersion","latestMajorReleaseVersion","find","patch","getLatestMajorReleaseVersion","length","lt","gt","getFirstRelease","doesVersionExist","allVersions","_error","VersionSelector","showDiff","setAllVersions","fromVersionList","setFromVersionList","toVersionList","setToVersionList","hasVersionsFromURL","setHasVersionsFromURL","localFromVersion","setLocalFromVersion","localToVersion","setLocalToVersion","upgradeButtonEl","useRef","releaseVersions","useMemo","versionsInURL","queryString","parse","from","to","getVersionsInURL","hasFromVersionInURL","hasToVersionInURL","toVersionToBeSet","sanitizedVersionsWithReleases","sanitizedVersions","fromVersionToBeSet","fetchVersions","current","loading","onChange","chosenVersion","visible","placement","content","resolveDiffVersion","targetVersion","r","DiffCommentReminder","comments","isDiffCollapsed","uncollapseDiff","numberOfComments","keys","isVisible","div","variants","opacity","cursor","invisible","animate","transition","InfoCircleOutlined","className","DownloadFileButton","console","info","shape","icon","DownloadOutlined","target","ViewFileButton","Wrapper","FileRenameArrow","RightOutlined","FileName","oldPath","newPath","FileStatus","color","add","modify","delete","rename","BinaryBadge","defaultIconButtonStyle","CompleteDiffButton","RollbackOutlined","CheckOutlined","isDiffCompleted","CopyPathToClipboardButton","onCopy","copyPathPopoverContent","resetCopyPathPopoverContent","text","trigger","overlayStyle","width","textAlign","CopyOutlined","onMouseOver","CollapseClickableArea","CollapseDiffButton","DownOutlined","DiffHeader","diffKey","hasDiff","setIsDiffCollapsed","onCompleteDiff","onCopyPathToClipboard","diffComments","sanitizedFilePaths","oldPathSanitized","newPathSanitized","getFilePathsToShow","altKey","Link","rel","e","stopPropagation","InlineCode","forceBlock","overrides","em","code","p","lineColors","neutral","isCommentVisible","height","hidden","initial","inherit","lineChangeType","ContentContainer","ShowButton","scaleX","whileHover","scale","Content","Markdown","LINE_CHANGE_TYPES","ADD","DELETE","NEUTRAL","getComments","some","fileName","reduce","allComments","versionComments","lineNumber","toUpperCase","getLineNumberWithType","DiffComment","setIsCommentVisible","copyPathPopoverContentOpts","More","Decoration","DiffDecoration","DiffView","RDiff","hunks","selectedChanges","onToggleChangeSelection","areAllCollapsed","setAllCollapsed","diffViewStyle","isDiffCollapsedByDefault","setCopyPathPopoverContent","getHunksWithAppName","useCallback","originalHunks","hunk","changes","change","collapse","viewType","diffType","widgets","optimizeSelection","updatedHunks","enhancers","markEdits","tokens","tokenize","gutterEvents","prevProps","nextProps","Title","DiffSection","getDiffKey","completedDiffs","isDoneSection","handleCompleteDiff","doneTitleRef","isUpgradingFrom61To62","isUpgradingFrom61","satisfies","isUpgradingTo62","getIsUpgradingFrom61To62","diffFile","match","oldRevision","newRevision","TitleLoader","speed","backgroundColor","foregroundColor","viewBox","rx","DiffLoader","x","y","motion","Header","DiffLoading","translateY","css","UpgradeSupportAlert","InnerContainer","isContentVisible","h2","visibleContent","translateX","hiddenContent","Icon","role","aria-label","HideContentButton","toggleContentVisibility","UpOutlined","Separator","List","UsefulContentSection","state","handleToggleContentVisibility","setState","getChangelog","context","url","versionWithoutEndingZero","slice","nextState","hasLoaded","this","hasContentBeenHidden","hasMoreThanOneRelease","usefulContent","changelog","links","description","Component","contextType","BinaryRow","index","Popover","overlayClassName","BinaryList","binaryFiles","BinaryDownload","DiffViewStyleOptions","handleViewStyleChange","Group","shake","keyframes","CompletedFilesCounter","completed","total","popoverContent","popoverCursorType","position","active","config","elementCount","angle","startVelocity","RawDiffLinkButton","diffURL","delay","ms","Promise","res","setTimeout","TopContainer","withChangeSelect","multiple","shouldShowDiff","setDiff","all","parseDiff","fetchDiff","useFetchDiff","setCompletedDiffs","isGoToDoneClicked","setIsGoToDoneClicked","donePopoverPossibleOpts","cursorType","donePopoverOpts","setDonePopoverOpts","localStorage","getItem","setViewStyle","diffSectionProps","prevCompletedDiffs","completedDiff","newViewStyle","setItem","style","marginTop","message","showIcon","closable","renderUpgradeDoneMessage","scrollTo","top","behavior","scrollIntoView","TROUBLESHOOTING_GUIDES","willHaveAnimation","ListContainer","TroubleshootingGuides","isTooltipVisible","hasSeenTooltip","hasAnimated","containerAnimation","useAnimation","tooltipAnimation","contentAnimation","startTroubleshootingAnimation","start","display","useTooltip","createPersistedState","TroubleshootingGuidesButton","showContent","setShowContent","shouldShowTroubleshootingGuide","setShouldShowTroubleshootingGuide","hasSeen","hasSeenAt","tooltip","setTooltip","setIsTooltipVisible","hasHandledClick","differenceInDays","Date","onVisibleChange","visibility","toISOString","Page","Card","HeaderContainer","LogoImg","TitleHeader","TitleContainer","SettingsContainer","StarButton","Home","packageNameFromURL","URLSearchParams","get","packageNames","values","useGetPackageNameFromURL","defaultPackageName","defaultLanguage","languageFromURL","languageNames","useGetLanguageFromURL","setFromVersion","setToVersion","setShouldShowDiff","settings","alt","src","logo","homepage","data-icon","data-show-count","App","Boolean","hostname","ReactDOM","render","document","getElementById","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8e699ae8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.d7a4563b.svg\";","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Select as AntdSelect } from 'antd'\n\nconst { Option } = AntdSelect\n\nconst SelectBoxContainer = styled.div`\n  width: 100%;\n`\nconst SelectBox = styled(AntdSelect)`\n  width: 100%;\n`\n\nconst Select = ({ title, options, ...props }) => (\n  <SelectBoxContainer>\n    <h4>{title}</h4>\n\n    <SelectBox size=\"large\" {...props}>\n      {options.map(({ version, createApp }) => (\n        <Option key={version} value={version}>\n          {createApp ? `${version} (create-app@${createApp})` : version}\n        </Option>\n      ))}\n    </SelectBox>\n  </SelectBoxContainer>\n)\n\nexport default Select\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Button as AntdButton } from 'antd'\n\nexport const testIDs = {\n  upgradeButton: 'upgradeButton'\n}\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  height: auto;\n  overflow: hidden;\n  margin-top: 25px;\n`\n\nconst Button = styled(AntdButton)`\n  border-radius: 3px;\n`\n\nconst UpgradeButton = React.forwardRef(({ onShowDiff, ...props }, ref) => (\n  <Container>\n    <Button\n      {...props}\n      ref={ref}\n      type=\"primary\"\n      size=\"large\"\n      data-testid={testIDs.upgradeButton}\n      onClick={onShowDiff}\n    >\n      Show me how to upgrade!\n    </Button>\n  </Container>\n))\n\nexport default UpgradeButton\n","export const DEFAULT_APP_NAME = 'backstagediffapp'\n\nexport const PACKAGE_NAMES = {\n  RN: 'react-native',\n  RNM: 'react-native-macos',\n  RNW: 'react-native-windows',\n  BACKSTAGE: '@backstage/create-app'\n}\n\nexport const LANGUAGE_NAMES = {\n  CPP: 'cpp',\n  CS: 'cs'\n}\n\nexport const RN_DIFF_REPOSITORIES = {\n  [PACKAGE_NAMES.RN]: 'react-native-community/rn-diff-purge',\n  [PACKAGE_NAMES.RNM]: 'acoates-ms/rnw-diff',\n  [PACKAGE_NAMES.RNW]: 'acoates-ms/rnw-diff',\n  [PACKAGE_NAMES.BACKSTAGE]: 'backstage/upgrade-helper-diff'\n}\n\nexport const RN_CHANGELOG_URLS = {\n  [PACKAGE_NAMES.RN]:\n    'https://github.com/react-native-community/releases/blob/master/CHANGELOG.md',\n  [PACKAGE_NAMES.RNM]:\n    'https://github.com/microsoft/react-native-macos/releases/tag/',\n  [PACKAGE_NAMES.RNW]:\n    'https://github.com/microsoft/react-native-windows/releases/tag/react-native-windows_',\n  [PACKAGE_NAMES.BACKSTAGE]:\n    'https://github.com/backstage/backstage/releases/tag/'\n}\n\nexport const DIFF_BASE_BRANCH =\n  process.env.REACT_APP_DIFF_BASE_BRANCH || 'master'\n","import { PACKAGE_NAMES } from '../constants'\n\nexport function updateURL({\n  packageName,\n  language,\n  isPackageNameDefinedInURL,\n  fromVersion,\n  toVersion\n}) {\n  const pageURL = window.location.href.replace(window.location.search, '')\n\n  const newURL =\n    fromVersion !== '' || toVersion !== ''\n      ? `?from=${fromVersion}&to=${toVersion}`\n      : '?'\n  const packageNameInURL = isPackageNameDefinedInURL\n    ? `&package=${packageName}`\n    : ''\n  const languageInURL =\n    packageName === PACKAGE_NAMES.RNW ? `&language=${language}` : ''\n\n  window.history.replaceState(\n    null,\n    null,\n    `${pageURL}${newURL}${packageNameInURL}${languageInURL}`\n  )\n}\n","export const deviceSizes = {\n  tablet: '(min-width: 768px)'\n}\n","import semver from 'semver/preload'\nimport {\n  RN_DIFF_REPOSITORIES,\n  DEFAULT_APP_NAME,\n  PACKAGE_NAMES,\n  RN_CHANGELOG_URLS,\n  DIFF_BASE_BRANCH\n} from './constants'\n\nconst getRNDiffRepository = ({ packageName }) =>\n  RN_DIFF_REPOSITORIES[packageName]\nconst getDiffBranch = ({ packageName }) =>\n  packageName === PACKAGE_NAMES.BACKSTAGE ? 'master' : 'diffs'\n\nexport const getReleasesFileURL = ({ packageName }) =>\n  `https://raw.githubusercontent.com/${getRNDiffRepository({\n    packageName\n  })}/${DIFF_BASE_BRANCH}/${\n    packageName === PACKAGE_NAMES.BACKSTAGE\n      ? 'releases.json'\n      : packageName === PACKAGE_NAMES.RNM\n      ? 'RELEASES_MAC'\n      : packageName === PACKAGE_NAMES.RNM\n      ? 'RELEASES_MAC'\n      : 'RELEASES'\n  }`\n\nexport const getDiffURL = ({\n  packageName,\n  language,\n  fromVersion,\n  toVersion\n}) => {\n  // eslint-disable-next-line no-unused-vars\n  const languageDir =\n    packageName === PACKAGE_NAMES.RNM\n      ? 'mac/'\n      : packageName === PACKAGE_NAMES.RNW\n      ? `${language}/`\n      : ''\n\n  return `https://raw.githubusercontent.com/${getRNDiffRepository({\n    packageName\n  })}/${getDiffBranch({ packageName })}/diffs/${fromVersion}..${toVersion}.diff`\n}\n\n// `path` must contain `RnDiffApp` prefix\nexport const getBinaryFileURL = ({ packageName, language, version, path }) => {\n  const branch =\n    packageName === PACKAGE_NAMES.RNM\n      ? `mac/${version}`\n      : packageName === PACKAGE_NAMES.RNW\n      ? `${language}/${version}`\n      : version\n\n  return `https://github.com/${getRNDiffRepository({\n    packageName\n  })}/raw/release/${branch}/${path}`\n}\n\nexport const removeAppPathPrefix = (path, appName) =>\n  path.replace(new RegExp(`${appName || DEFAULT_APP_NAME}/`), '')\n\nexport const replaceWithProvidedAppName = (path, appName) => {\n  if (!appName) {\n    return path\n  }\n\n  return path\n    .replace(new RegExp(DEFAULT_APP_NAME, 'g'), appName)\n    .replace(\n      new RegExp(DEFAULT_APP_NAME.toLowerCase(), 'g'),\n      appName.toLowerCase()\n    )\n}\n\nexport const getVersionsContentInDiff = ({\n  fromVersion,\n  toVersion,\n  versions\n}) => {\n  const cleanedToVersion = semver.valid(semver.coerce(toVersion))\n\n  return versions.filter(({ version }) => {\n    const cleanedVersion = semver.coerce(version)\n\n    // `cleanedVersion` can't be newer than `cleanedToVersion` nor older (or equal) than `fromVersion`\n    return (\n      semver.compare(cleanedToVersion, cleanedVersion) !== -1 &&\n      ![0, -1].includes(semver.compare(cleanedVersion, fromVersion))\n    )\n  })\n}\n\nexport const getChangelogURL = ({ version, packageName }) => {\n  if (packageName === PACKAGE_NAMES.RNW || packageName === PACKAGE_NAMES.RNM) {\n    return `${RN_CHANGELOG_URLS[packageName]}v${version}`\n  }\n  if (packageName === PACKAGE_NAMES.BACKSTAGE) {\n    return `${RN_CHANGELOG_URLS[packageName]}v${version}`\n  }\n\n  return `${RN_CHANGELOG_URLS[packageName]}#v${version.replace('.', '')}0`\n}\n\n// If the browser is headless (running puppeteer) then it doesn't have any duration\nexport const getTransitionDuration = duration =>\n  navigator.webdriver ? 0 : duration\n\n// settings constants\nexport const SHOW_LATEST_RCS = 'Show latest release candidates'\n\nexport const getFilePathsToShow = ({ oldPath, newPath, appName }) => {\n  const oldPathSanitized = replaceWithProvidedAppName(oldPath, appName)\n  const newPathSanitized = replaceWithProvidedAppName(newPath, appName)\n\n  return {\n    oldPath: removeAppPathPrefix(oldPathSanitized, appName),\n    newPath: removeAppPathPrefix(newPathSanitized, appName)\n  }\n}\n","import React, { useContext, useState } from 'react'\nimport { useFetchReleases } from './hooks/fetch-release-versions'\n\nexport const ReleasesContext = React.createContext({\n  isDone: false,\n  isLoading: false,\n  releases: undefined\n})\n\nexport const ReleasesProvider = React.memo(function({ children, packageName }) {\n  const value = useFetchReleases({ packageName })\n  const [selectedVersions, setSelectedVersions] = useState()\n\n  return (\n    <ReleasesContext.Provider\n      value={{ ...value, setSelectedVersions, ...selectedVersions }}\n    >\n      {children}\n    </ReleasesContext.Provider>\n  )\n})\n\nexport const useReleases = () => useContext(ReleasesContext)\n","import { useEffect, useState } from 'react'\nimport { getReleasesFileURL } from '../utils'\nimport compare from 'semver/functions/rcompare'\n\nexport const useFetchReleases = ({ packageName }) => {\n  const [isLoading, setIsLoading] = useState(true)\n  const [isDone, setIsDone] = useState(false)\n  const [releases, setReleases] = useState(undefined)\n\n  useEffect(() => {\n    const fetchReleaseVersions = async () => {\n      setIsLoading(true)\n      setIsDone(false)\n      const response = await (\n        await fetch(getReleasesFileURL({ packageName }))\n      ).json()\n\n      const _releases = Object.entries(response)\n        .map(([version, value]) => ({ version, ...value }))\n        .sort((a, b) => compare(a.version, b.version))\n      setReleases(_releases)\n\n      setIsLoading(false)\n      setIsDone(true)\n\n      return\n    }\n\n    fetchReleaseVersions()\n  }, [packageName])\n\n  return {\n    isLoading,\n    isDone,\n    releases\n  }\n}\n","import React, { Fragment, useState, useMemo, useEffect, useRef } from 'react'\nimport styled from '@emotion/styled'\nimport { Popover } from 'antd'\nimport semver from 'semver/preload'\nimport queryString from 'query-string'\nimport { Select } from './'\nimport UpgradeButton from './UpgradeButton'\n// import { useFetchReleaseVersions } from '../../hooks/fetch-release-versions'\nimport { updateURL } from '../../utils/update-url'\nimport { deviceSizes } from '../../utils/device-sizes'\nimport { useReleases } from '../../ReleaseProvider'\n\nexport const testIDs = {\n  fromVersionSelector: 'fromVersionSelector',\n  toVersionSelector: 'toVersionSelector'\n}\n\nconst Selectors = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 15px;\n\n  @media ${deviceSizes.tablet} {\n    flex-direction: row;\n    gap: 0;\n  }\n`\n\nconst FromVersionSelector = styled(Select)`\n  @media ${deviceSizes.tablet} {\n    padding-right: 5px;\n  }\n`\n\nconst ToVersionSelector = styled(({ popover, ...props }) =>\n  popover ? (\n    React.cloneElement(popover, {\n      children: <Select {...props} />\n    })\n  ) : (\n    <Select {...props} />\n  )\n)`\n  @media ${deviceSizes.tablet} {\n    padding-left: 5px;\n  }\n`\n\nconst getVersionsInURL = () => {\n  // Parses `/?from=VERSION&to=VERSION` from URL\n  const { from: fromVersion, to: toVersion } = queryString.parse(\n    window.location.search\n  )\n\n  return {\n    fromVersion,\n    toVersion\n  }\n}\n\nconst compareReleaseCandidateVersions = ({ version, versionToCompare }) =>\n  ['prerelease', 'prepatch', null].includes(\n    semver.diff(version, versionToCompare)\n  )\n\nconst getLatestMajorReleaseVersion = releasedVersions =>\n  semver.valid(\n    semver.coerce(\n      releasedVersions.find(\n        ({ createApp: releasedVersion }) =>\n          !semver.prerelease(releasedVersion) &&\n          semver.patch(releasedVersion) === 0\n      )\n    )\n  )\n\n// Check if `from` rc version is one of the latest major release (ie. 0.60.0)\nconst checkIfVersionIsALatestRC = ({ version, latestVersion }) =>\n  semver.prerelease(version) &&\n  compareReleaseCandidateVersions({\n    version: latestVersion,\n    versionToCompare: version\n  })\n\n// Filters out release candidates from `releasedVersion` with the\n// exception of the release candidates from the latest version\nconst getReleasedVersionsWithCandidates = ({\n  releasedVersions,\n  toVersion,\n  latestVersion,\n  showReleaseCandidates\n}) => {\n  const isToVersionAReleaseCandidate = semver.prerelease(toVersion) !== null\n  const isLatestAReleaseCandidate = semver.prerelease(latestVersion) !== null\n\n  return releasedVersions.filter(({ version: releasedVersion }) => {\n    // Show the release candidates of the latest version\n    const isLatestReleaseCandidate =\n      showReleaseCandidates &&\n      checkIfVersionIsALatestRC({\n        version: releasedVersion,\n        latestVersion\n      })\n\n    return (\n      isLatestReleaseCandidate ||\n      semver.prerelease(releasedVersion) === null ||\n      (isToVersionAReleaseCandidate &&\n        compareReleaseCandidateVersions({\n          version: toVersion,\n          versionToCompare: releasedVersion\n        })) ||\n      (isLatestAReleaseCandidate &&\n        compareReleaseCandidateVersions({\n          version: latestVersion,\n          versionToCompare: releasedVersion\n        }))\n    )\n  })\n}\n\nconst getReleasedVersions = ({ releasedVersions, minVersion, maxVersion }) => {\n  const latestMajorReleaseVersion = getLatestMajorReleaseVersion(\n    releasedVersions\n  )\n\n  const isVersionAReleaseAndOfLatest = version =>\n    version.includes('rc') &&\n    semver.valid(semver.coerce(version)) === latestMajorReleaseVersion\n\n  return releasedVersions.filter(\n    ({ version: releasedVersion }) =>\n      releasedVersion.length > 0 &&\n      ((maxVersion && semver.lt(releasedVersion, maxVersion)) ||\n        (minVersion &&\n          semver.gt(releasedVersion, minVersion) &&\n          !isVersionAReleaseAndOfLatest(releasedVersion)))\n  )\n}\n\n// Finds the first specified release (patch, minor, major) when compared to another version\nconst getFirstRelease = (\n  { releasedVersions, versionToCompare },\n  type = 'minor'\n) =>\n  releasedVersions.find(\n    releasedVersion =>\n      semver.lt(releasedVersion, versionToCompare) &&\n      semver.diff(\n        semver.valid(semver.coerce(releasedVersion)),\n        semver.valid(semver.coerce(versionToCompare))\n      ) === type\n  )\n\n// Return if version exists in the ones returned from GitHub\nconst doesVersionExist = ({ version, allVersions, minVersion }) => {\n  try {\n    return (\n      version &&\n      allVersions.includes(version) &&\n      // Also compare the version against a `minVersion`, this is used\n      // to not allow the user to have a `fromVersion` newer than `toVersion`\n      (!minVersion || (minVersion && semver.gt(version, minVersion)))\n    )\n  } catch (_error) {\n    return false\n  }\n}\n\nconst VersionSelector = ({\n  packageName,\n  language,\n  isPackageNameDefinedInURL,\n  showDiff,\n  showReleaseCandidates\n}) => {\n  const [allVersions, setAllVersions] = useState([])\n  const [fromVersionList, setFromVersionList] = useState([])\n  const [toVersionList, setToVersionList] = useState([])\n  const [hasVersionsFromURL, setHasVersionsFromURL] = useState(false)\n\n  const [localFromVersion, setLocalFromVersion] = useState('')\n  const [localToVersion, setLocalToVersion] = useState('')\n\n  const upgradeButtonEl = useRef(null)\n  const { isDone, isLoading, releases, setSelectedVersions } = useReleases()\n  const releaseVersions = useMemo(\n    () => releases?.map(({ version }) => version),\n    [releases]\n  )\n\n  useEffect(() => {\n    const versionsInURL = getVersionsInURL()\n\n    const fetchVersions = async () => {\n      // Check if the versions provided in the URL are valid\n      const hasFromVersionInURL = doesVersionExist({\n        version: versionsInURL.fromVersion,\n        allVersions: releaseVersions\n      })\n\n      const hasToVersionInURL = doesVersionExist({\n        version: versionsInURL.toVersion,\n        allVersions: releaseVersions,\n        minVersion: versionsInURL.fromVersion\n      })\n\n      const latestVersion = releaseVersions[0]\n      // If the version from URL is not valid then fallback to the latest\n      const toVersionToBeSet = hasToVersionInURL\n        ? versionsInURL.toVersion\n        : latestVersion\n\n      // Remove `rc` versions from the array of versions\n      const sanitizedVersionsWithReleases = getReleasedVersionsWithCandidates({\n        releasedVersions: releases,\n        toVersion: toVersionToBeSet,\n        latestVersion,\n        showReleaseCandidates\n      })\n\n      const sanitizedVersions = sanitizedVersionsWithReleases.map(\n        ({ version }) => version\n      )\n\n      setAllVersions(sanitizedVersionsWithReleases)\n\n      const fromVersionToBeSet = hasFromVersionInURL\n        ? versionsInURL.fromVersion\n        : // Get first major release before latest\n          getFirstRelease(\n            {\n              releasedVersions: sanitizedVersions,\n              versionToCompare: toVersionToBeSet\n            },\n            'minor'\n          ) ||\n          getFirstRelease(\n            {\n              releasedVersions: sanitizedVersions,\n              versionToCompare: toVersionToBeSet\n            },\n            'patch'\n          )\n\n      setFromVersionList(\n        getReleasedVersions({\n          releasedVersions: sanitizedVersionsWithReleases,\n          maxVersion: toVersionToBeSet\n        })\n      )\n      setToVersionList(\n        getReleasedVersions({\n          releasedVersions: sanitizedVersionsWithReleases,\n          minVersion: fromVersionToBeSet\n        })\n      )\n\n      setLocalFromVersion(fromVersionToBeSet)\n      setLocalToVersion(toVersionToBeSet)\n\n      const doesHaveVersionsInURL = hasFromVersionInURL && hasToVersionInURL\n\n      setHasVersionsFromURL(doesHaveVersionsInURL)\n    }\n\n    if (isDone) {\n      fetchVersions()\n    }\n  }, [\n    isDone,\n    releaseVersions,\n    setLocalFromVersion,\n    setLocalToVersion,\n    showReleaseCandidates\n  ])\n\n  useEffect(() => {\n    if (isLoading) {\n      return\n    }\n\n    setFromVersionList(\n      getReleasedVersions({\n        releasedVersions: allVersions,\n        maxVersion: localToVersion\n      })\n    )\n    setToVersionList(\n      getReleasedVersions({\n        releasedVersions: allVersions,\n        minVersion: localFromVersion\n      })\n    )\n\n    if (hasVersionsFromURL) {\n      upgradeButtonEl.current.props.onClick()\n    }\n  }, [\n    isLoading,\n    allVersions,\n    localFromVersion,\n    localToVersion,\n    hasVersionsFromURL,\n    showReleaseCandidates\n  ])\n\n  const onShowDiff = () => {\n    const resolveDiffVersion = targetVersion =>\n      releases.find(r => r.version === targetVersion)\n\n    setSelectedVersions({\n      from: resolveDiffVersion(localFromVersion),\n      to: resolveDiffVersion(localToVersion)\n    })\n\n    showDiff({\n      fromVersion:\n        resolveDiffVersion(localFromVersion)?.createApp || localFromVersion,\n      toVersion: resolveDiffVersion(localToVersion)?.createApp || localToVersion\n    })\n\n    updateURL({\n      packageName,\n      language,\n      isPackageNameDefinedInURL,\n      fromVersion: localFromVersion,\n      toVersion: localToVersion\n    })\n  }\n\n  return (\n    <Fragment>\n      <Selectors>\n        <FromVersionSelector\n          data-testid={testIDs.fromVersionSelector}\n          title={`What's your current Backstage release or @backstage/create-app (0.4.x) version?`}\n          loading={isLoading}\n          value={localFromVersion}\n          options={fromVersionList}\n          onChange={chosenVersion => setLocalFromVersion(chosenVersion)}\n        />\n\n        <ToVersionSelector\n          data-testid={testIDs.toVersionSelector}\n          title=\"To which version would you like to upgrade?\"\n          loading={isLoading}\n          value={localToVersion}\n          options={toVersionList}\n          popover={\n            localToVersion === '0.60.1' && (\n              <Popover\n                visible={true}\n                placement=\"topLeft\"\n                content=\"We recommend using the latest 0.60 patch release instead of 0.60.1.\"\n              />\n            )\n          }\n          onChange={chosenVersion => setLocalToVersion(chosenVersion)}\n        />\n      </Selectors>\n\n      <UpgradeButton ref={upgradeButtonEl} onShowDiff={onShowDiff} />\n    </Fragment>\n  )\n}\n\nexport default VersionSelector\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { motion } from 'framer-motion'\nimport { InfoCircleOutlined } from '@ant-design/icons'\nimport { getTransitionDuration } from '../../../utils'\n\nconst DiffCommentReminder = styled(\n  ({ comments, isDiffCollapsed, uncollapseDiff, ...props }) => {\n    const numberOfComments = Object.keys(comments).length\n    const isVisible = isDiffCollapsed && numberOfComments > 0\n\n    return (\n      <motion.div\n        {...props}\n        variants={{\n          visible: { opacity: 1, cursor: 'pointer' },\n          invisible: { opacity: 0, cursor: 'initial' }\n        }}\n        animate={isVisible > 0 ? 'visible' : 'invisible'}\n        transition={{\n          duration: getTransitionDuration(0.5)\n        }}\n        onClick={uncollapseDiff}\n      >\n        <InfoCircleOutlined className=\"icon\" />\n\n        <span className=\"reminder\">\n          {numberOfComments} hidden comment{numberOfComments > 1 && 's'}\n        </span>\n      </motion.div>\n    )\n  }\n)`\n  display: inline;\n  background-color: #fffbe6;\n  padding: 5px;\n  border-radius: 3px;\n  margin-left: 10px;\n  border: 1px solid #ffe58f;\n\n  & > .icon {\n    margin-right: 6px;\n  }\n\n  & > .reminder {\n    word-spacing: -2px;\n  }\n`\n\nexport default DiffCommentReminder\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Button } from 'antd'\nimport { DownloadOutlined } from '@ant-design/icons'\nimport { getBinaryFileURL } from '../../utils'\n\nconst DownloadFileButton = styled(\n  ({ visible, version, path, packageName, ...props }) => {\n    console.info(visible, version, path, packageName)\n    return visible ? (\n      <Button\n        {...props}\n        type=\"ghost\"\n        shape=\"circle\"\n        icon={<DownloadOutlined />}\n        target=\"_blank\"\n        href={getBinaryFileURL({ packageName, version, path })}\n      />\n    ) : null\n  }\n)`\n  color: #24292e;\n  font-size: 12px;\n  border-width: 0;\n  &:hover,\n  &:focus {\n    color: #24292e;\n  }\n`\n\nexport default DownloadFileButton\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Button } from 'antd'\nimport { getBinaryFileURL } from '../../utils'\n\nconst ViewFileButton = styled(\n  ({ visible, version, path, packageName, ...props }) => {\n    if (!visible) {\n      return null\n    }\n\n    return (\n      <Button\n        {...props}\n        type=\"link\"\n        target=\"_blank\"\n        href={getBinaryFileURL({ packageName, version, path })}\n      >\n        View file\n      </Button>\n    )\n  }\n)`\n  font-size: 12px;\n  color: #24292e;\n`\n\nexport default ViewFileButton\n","import React, { Fragment } from 'react'\nimport styled from '@emotion/styled'\nimport { Tag, Button, Popover } from 'antd'\nimport {\n  CheckOutlined,\n  DownOutlined,\n  RightOutlined,\n  CopyOutlined,\n  RollbackOutlined\n} from '@ant-design/icons'\nimport { getFilePathsToShow } from '../../../utils'\nimport { CopyToClipboard } from 'react-copy-to-clipboard'\nimport DiffCommentReminder from './DiffCommentReminder'\nimport DownloadFileButton from '../DownloadFileButton'\nimport ViewFileButton from '../ViewFileButton'\n\nexport const testIDs = {\n  collapseClickableArea: 'collapseClickableArea'\n}\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier,\n    monospace;\n  font-size: 12px;\n  color: #24292e;\n  line-height: 32px;\n  background-color: #fafbfc;\n  border-bottom: 1px solid #e1e4e8;\n  border-top-left-radius: 2px;\n  border-top-right-radius: 2px;\n  padding: 5px 10px;\n  position: sticky;\n  top: 0;\n`\n\nconst FileRenameArrow = styled(RightOutlined)({\n  fontSize: '10px',\n  margin: '0 5px',\n  color: '#f78206'\n})\n\nconst FileName = ({ oldPath, newPath, type, appName }) => {\n  if (type === 'delete') {\n    return <span>{oldPath}</span>\n  }\n\n  if (oldPath !== newPath && type !== 'add') {\n    return (\n      <span>\n        {oldPath} <FileRenameArrow /> {newPath}\n      </span>\n    )\n  }\n\n  return <span>{newPath}</span>\n}\n\nconst FileStatus = ({ type, ...props }) => {\n  const colors = {\n    add: 'blue',\n    modify: 'green',\n    delete: 'red',\n    rename: 'orange'\n  }\n\n  const labels = {\n    add: 'ADDED',\n    modify: 'MODIFIED',\n    delete: 'DELETED',\n    rename: 'RENAMED'\n  }\n\n  return (\n    <Tag {...props} color={colors[type]}>\n      {labels[type]}\n    </Tag>\n  )\n}\n\nconst BinaryBadge = ({ visible, ...props }) =>\n  visible ? (\n    <Tag {...props} color=\"cyan\">\n      BINARY\n    </Tag>\n  ) : null\n\nconst defaultIconButtonStyle = `\n  font-size: 13px;\n  line-height: 0;\n  border-width: 0px;\n  width: 22px;\n  height: 22px;\n  margin: 5px 0;\n  border-radius: 50%;\n`\n\nconst CompleteDiffButton = styled(({ visible, onClick, ...props }) =>\n  visible ? (\n    <Button\n      {...props}\n      type=\"ghost\"\n      icon={<RollbackOutlined />}\n      onClick={onClick}\n    />\n  ) : (\n    <Button\n      {...props}\n      type=\"ghost\"\n      icon={<CheckOutlined />}\n      onClick={onClick}\n    />\n  )\n)`\n  ${defaultIconButtonStyle}\n  &,\n  &:hover,\n  &:focus {\n    color: ${({ isDiffCompleted }) =>\n      isDiffCompleted ? '#52c41a' : '#24292e'};\n  }\n`\n\nconst CopyPathToClipboardButton = styled(\n  ({\n    oldPath,\n    newPath,\n    type,\n    onCopy,\n    copyPathPopoverContent,\n    resetCopyPathPopoverContent,\n    ...props\n  }) => (\n    <CopyToClipboard text={type === 'add' ? newPath : oldPath} onCopy={onCopy}>\n      <Popover\n        content={copyPathPopoverContent}\n        trigger=\"hover\"\n        overlayStyle={{\n          width: '175px',\n          textAlign: 'center'\n        }}\n      >\n        <Button\n          {...props}\n          type=\"ghost\"\n          icon={<CopyOutlined />}\n          onMouseOver={resetCopyPathPopoverContent}\n        />\n      </Popover>\n    </CopyToClipboard>\n  )\n)`\n  ${defaultIconButtonStyle}\n`\n\nconst CollapseClickableArea = styled.div`\n  display: inline-block;\n  &:hover {\n    cursor: pointer;\n  }\n`\n\nconst CollapseDiffButton = styled(({ visible, isDiffCollapsed, ...props }) =>\n  visible ? <Button {...props} type=\"link\" icon={<DownOutlined />} /> : null\n)`\n  color: #24292e;\n  margin-right: 2px;\n  font-size: 10px;\n  transform: ${({ isDiffCollapsed }) =>\n    isDiffCollapsed ? 'rotate(-90deg)' : 'initial'};\n  transition: transform 0.2s ease-in-out;\n  transform-origin: center;\n  line-height: 0;\n  height: auto;\n  &:hover,\n  &:focus {\n    color: #24292e;\n  }\n`\n\nconst DiffHeader = ({\n  oldPath,\n  newPath,\n  toVersion,\n  type,\n  diffKey,\n  hasDiff,\n  isDiffCollapsed,\n  setIsDiffCollapsed,\n  isDiffCompleted,\n  onCompleteDiff,\n  onCopyPathToClipboard,\n  copyPathPopoverContent,\n  resetCopyPathPopoverContent,\n  appName,\n  diffComments,\n  packageName,\n  ...props\n}) => {\n  const sanitizedFilePaths = getFilePathsToShow({ oldPath, newPath, appName })\n\n  return (\n    <Wrapper {...props}>\n      <div>\n        <CollapseClickableArea\n          data-testid={testIDs.collapseClickableArea}\n          onClick={({ altKey }) => setIsDiffCollapsed(!isDiffCollapsed, altKey)}\n        >\n          <CollapseDiffButton\n            visible={hasDiff}\n            isDiffCollapsed={isDiffCollapsed}\n          />\n          <FileName\n            oldPath={sanitizedFilePaths.oldPath}\n            newPath={sanitizedFilePaths.newPath}\n            type={type}\n            appName={appName}\n          />{' '}\n          <FileStatus type={type} />\n          <BinaryBadge visible={!hasDiff} />\n        </CollapseClickableArea>\n        <CopyPathToClipboardButton\n          oldPath={sanitizedFilePaths.oldPath}\n          newPath={sanitizedFilePaths.newPath}\n          type={type}\n          onCopy={onCopyPathToClipboard}\n          copyPathPopoverContent={copyPathPopoverContent}\n          resetCopyPathPopoverContent={resetCopyPathPopoverContent}\n        />\n\n        <DiffCommentReminder\n          comments={diffComments}\n          isDiffCollapsed={isDiffCollapsed}\n          uncollapseDiff={() => setIsDiffCollapsed(false)}\n        />\n      </div>\n      <div>\n        <Fragment>\n          <ViewFileButton\n            visible={hasDiff && type !== 'delete'}\n            version={toVersion}\n            path={newPath}\n            packageName={packageName}\n          />\n          <DownloadFileButton\n            visible={!hasDiff && type !== 'delete'}\n            version={toVersion}\n            path={newPath}\n            packageName={packageName}\n          />\n          <CompleteDiffButton\n            visible={isDiffCompleted}\n            onClick={() => onCompleteDiff(diffKey)}\n          />\n        </Fragment>\n      </div>\n    </Wrapper>\n  )\n}\n\nexport default DiffHeader\n","import React from 'react'\nimport Markdown from 'markdown-to-jsx'\nimport styled from '@emotion/styled'\n\nexport const Link = styled(props => (\n  // eslint-disable-next-line jsx-a11y/anchor-has-content\n  <a\n    target=\"_blank\"\n    {...props}\n    rel=\"noopener\"\n    onClick={e => e.stopPropagation()}\n  />\n))`\n  text-decoration: none;\n  color: #045dc1;\n`\n\nconst InlineCode = styled.em`\n  font-style: normal;\n  background-color: rgba(27, 31, 35, 0.07);\n  border-radius: 3px;\n  font-size: 85%;\n  margin: 0;\n  padding: 0.2em 0.4em;\n`\n\nexport default ({ forceBlock = false, options = {}, ...props }) => (\n  <Markdown\n    {...props}\n    options={{\n      ...options,\n      forceBlock,\n      overrides: {\n        ...options.overrides,\n        a: Link,\n        em: InlineCode,\n        code: InlineCode,\n        p: styled.p`\n          margin-bottom: 0;\n        `\n      }\n    }}\n  />\n)\n","import React, { useState, Fragment } from 'react'\nimport styled from '@emotion/styled'\nimport { motion } from 'framer-motion'\nimport { removeAppPathPrefix, getVersionsContentInDiff } from '../../../utils'\nimport Markdown from '../Markdown'\n\nconst lineColors = {\n  add: '#d6fedb',\n  delete: '#fdeff0',\n  neutral: '#ffffff'\n}\n\nconst Container = styled(({ isCommentVisible, children, ...props }) => (\n  <motion.div\n    {...props}\n    variants={{\n      visible: {\n        height: 'auto'\n      },\n      hidden: { height: 10 }\n    }}\n    initial={isCommentVisible ? 'visible' : 'hidden'}\n    animate={isCommentVisible ? 'visible' : 'hidden'}\n    transition={{\n      duration: 0.5\n    }}\n    inherit={false}\n  >\n    <div children={children} />\n  </motion.div>\n))`\n  overflow: hidden;\n\n  & > div {\n    display: flex;\n    flex-direction: row;\n    background-color: ${({ lineChangeType }) => lineColors[lineChangeType]};\n    cursor: pointer;\n  }\n`\n\nconst ContentContainer = styled.div`\n  flex: 1;\n  position: relative;\n  padding: 16px;\n  color: #000;\n  background-color: #fffbe6;\n  user-select: none;\n`\n\nconst ShowButton = styled(({ isCommentVisible, ...props }) => (\n  <motion.div\n    {...props}\n    variants={{\n      visible: {\n        scaleX: 1\n      },\n      hidden: { scaleX: 10 }\n    }}\n    whileHover={{\n      scale: 2\n    }}\n    initial={isCommentVisible ? 'visible' : 'hidden'}\n    animate={isCommentVisible ? 'visible' : 'hidden'}\n    transition={{\n      duration: 0.25\n    }}\n  />\n))`\n  background-color: #ffe58f;\n  margin-left: 20px;\n  width: 10px;\n  cursor: pointer;\n`\n\nconst Content = styled(Markdown)`\n  opacity: 1;\n  ${({ isCommentVisible }) =>\n    !isCommentVisible &&\n    `\n      opacity: 0;\n    `}\n  transition: opacity 0.25s ease-out;\n`\n\nconst LINE_CHANGE_TYPES = {\n  ADD: 'I',\n  DELETE: 'D',\n  NEUTRAL: 'N'\n}\n\nconst getLineNumberWithType = ({ lineChangeType, lineNumber }) =>\n  `${LINE_CHANGE_TYPES[lineChangeType.toUpperCase()]}${lineNumber}`\n\nconst getComments = ({ versions, newPath, fromVersion, toVersion }) => {\n  const newPathSanitized = removeAppPathPrefix(newPath)\n\n  const versionsInDiff = getVersionsContentInDiff({\n    versions,\n    fromVersion,\n    toVersion\n  }).filter(\n    ({ comments }) =>\n      comments &&\n      comments.length > 0 &&\n      comments.some(({ fileName }) => fileName === newPathSanitized)\n  )\n\n  return versionsInDiff.reduce((allComments, version) => {\n    const comments = version.comments.reduce(\n      (versionComments, { fileName, lineChangeType, lineNumber, content }) => {\n        if (fileName !== newPathSanitized) {\n          return versionComments\n        }\n\n        return {\n          ...versionComments,\n          [getLineNumberWithType({ lineChangeType, lineNumber })]: (\n            <DiffComment\n              content={<Fragment>{content}</Fragment>}\n              lineChangeType={lineChangeType}\n            />\n          )\n        }\n      },\n      {}\n    )\n\n    return {\n      ...allComments,\n      ...comments\n    }\n  }, {})\n}\n\nconst DiffComment = ({ content, lineChangeType }) => {\n  const [isCommentVisible, setIsCommentVisible] = useState(true)\n\n  return (\n    <Container\n      isCommentVisible={isCommentVisible}\n      lineChangeType={lineChangeType}\n      onClick={() => setIsCommentVisible(!isCommentVisible)}\n    >\n      <ShowButton\n        isCommentVisible={isCommentVisible}\n        onClick={() => setIsCommentVisible(!isCommentVisible)}\n      />\n\n      <ContentContainer>\n        <Content isCommentVisible={isCommentVisible}>\n          {content.props.children}\n        </Content>\n      </ContentContainer>\n    </Container>\n  )\n}\n\nexport { getComments }\nexport default DiffComment\n","import React, { useState, useCallback, useEffect } from 'react'\nimport styled from '@emotion/styled'\nimport {\n  Diff as RDiff,\n  Hunk,\n  markEdits,\n  tokenize,\n  Decoration as DiffDecoration\n} from 'react-diff-view'\nimport DiffHeader from './DiffHeader'\nimport { getComments } from './DiffComment'\nimport { replaceWithProvidedAppName } from '../../../utils'\nimport { useReleases } from '../../../ReleaseProvider'\n\nconst copyPathPopoverContentOpts = {\n  default: 'Click to copy file path',\n  copied: 'File path copied!'\n}\n\nconst Container = styled.div`\n  border: 1px solid #e8e8e8;\n  border-radius: 3px;\n  margin-bottom: 16px;\n  margin-top: 16px;\n`\n\nconst More = styled.div`\n  background-color: #f1f8ff;\n  margin-left: 30px;\n  padding-left: 4px;\n  color: '#1b1f23b3';\n`\n\nconst Decoration = styled(DiffDecoration)`\n  background-color: #dbedff;\n`\n\nconst DiffView = styled(RDiff)`\n  .diff-gutter-col {\n    width: 30px;\n  }\n\n  tr.diff-line {\n    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier,\n      monospace;\n  }\n\n  td.diff-gutter {\n    color: rgba(27, 31, 35, 0.3);\n    padding: 0;\n    text-align: center;\n    font-size: 12px;\n    cursor: auto;\n  }\n\n  td.diff-gutter .diff-line-normal {\n    background-color: #cdffd8;\n    border-color: #bef5cb;\n  }\n\n  td.diff-gutter:hover {\n    cursor: pointer;\n    color: rgba(27, 31, 35, 0.6);\n  }\n\n  td.diff-code {\n    font-size: 12px;\n    color: #24292e;\n  }\n\n  td.diff-code-insert .diff-code-edit {\n    background-color: #acf2bd;\n  }\n\n  td.diff-gutter-omit:before {\n    width: 0;\n    background-color: transparent;\n  }\n\n  td.diff-widget-content {\n    padding: 0;\n  }\n`\n\n// Diff will be collapsed by default if the file has been deleted or has more than 5 hunks\nconst isDiffCollapsedByDefault = ({ type, hunks }) =>\n  type === 'delete' || hunks.length > 5 ? true : undefined\n\nconst Diff = ({\n  packageName,\n  oldPath,\n  newPath,\n  type,\n  hunks,\n  fromVersion,\n  toVersion,\n  diffKey,\n  isDiffCompleted,\n  onCompleteDiff,\n  selectedChanges,\n  onToggleChangeSelection,\n  areAllCollapsed,\n  setAllCollapsed,\n  diffViewStyle,\n  appName\n}) => {\n  const [isDiffCollapsed, setIsDiffCollapsed] = useState(\n    isDiffCollapsedByDefault({ type, hunks })\n  )\n\n  const [copyPathPopoverContent, setCopyPathPopoverContent] = useState(\n    copyPathPopoverContentOpts.default\n  )\n\n  const handleCopyPathToClipboard = () => {\n    setCopyPathPopoverContent(copyPathPopoverContentOpts.copied)\n  }\n\n  const handleResetCopyPathPopoverContent = () => {\n    if (copyPathPopoverContent === copyPathPopoverContentOpts.copied) {\n      setCopyPathPopoverContent(copyPathPopoverContentOpts.default)\n    }\n  }\n\n  const getHunksWithAppName = useCallback(\n    originalHunks => {\n      if (!appName) {\n        return originalHunks\n      }\n\n      return originalHunks.map(hunk => ({\n        ...hunk,\n        changes: hunk.changes.map(change => ({\n          ...change,\n          content: replaceWithProvidedAppName(change.content, appName)\n        }))\n      }))\n    },\n    [appName]\n  )\n\n  useEffect(() => {\n    if (areAllCollapsed !== undefined && areAllCollapsed !== isDiffCollapsed) {\n      setIsDiffCollapsed(areAllCollapsed)\n    } else if (isDiffCompleted && isDiffCollapsed === undefined) {\n      setIsDiffCollapsed(true)\n    }\n  }, [areAllCollapsed, isDiffCollapsed, isDiffCompleted])\n\n  const { releases } = useReleases()\n  const diffComments = getComments({\n    versions: releases,\n    newPath,\n    fromVersion,\n    toVersion,\n    appName\n  })\n\n  return (\n    <Container>\n      <DiffHeader\n        oldPath={oldPath}\n        newPath={newPath}\n        toVersion={toVersion}\n        type={type}\n        diffKey={diffKey}\n        hasDiff={hunks.length > 0}\n        isDiffCollapsed={isDiffCollapsed}\n        setIsDiffCollapsed={(collapse, altKey) => {\n          if (altKey) {\n            return setAllCollapsed(collapse)\n          }\n\n          setAllCollapsed(undefined)\n          setIsDiffCollapsed(collapse)\n        }}\n        isDiffCompleted={isDiffCompleted}\n        onCopyPathToClipboard={handleCopyPathToClipboard}\n        copyPathPopoverContent={copyPathPopoverContent}\n        resetCopyPathPopoverContent={handleResetCopyPathPopoverContent}\n        onCompleteDiff={onCompleteDiff}\n        appName={appName}\n        diffComments={diffComments}\n        packageName={packageName}\n      />\n\n      {!isDiffCollapsed && (\n        <DiffView\n          viewType={diffViewStyle}\n          diffType={type}\n          hunks={hunks}\n          widgets={diffComments}\n          optimizeSelection={true}\n          selectedChanges={selectedChanges}\n        >\n          {originalHunks => {\n            const updatedHunks = getHunksWithAppName(originalHunks)\n\n            const options = {\n              enhancers: [markEdits(updatedHunks)]\n            }\n\n            const tokens = tokenize(updatedHunks, options)\n\n            return updatedHunks.map(hunk => [\n              <Decoration key={'decoration-' + hunk.content}>\n                <More>{hunk.content}</More>\n              </Decoration>,\n              <Hunk\n                key={hunk.content}\n                hunk={hunk}\n                tokens={tokens}\n                gutterEvents={{ onClick: onToggleChangeSelection }}\n              />\n            ])\n          }}\n        </DiffView>\n      )}\n    </Container>\n  )\n}\n\n/*\n  Return true if passing `nextProps` to render would return\n  the same result as passing prevProps to render, otherwise return false\n*/\nconst arePropsEqual = (prevProps, nextProps) =>\n  prevProps.isDiffCompleted === nextProps.isDiffCompleted &&\n  prevProps.areAllCollapsed === nextProps.areAllCollapsed &&\n  prevProps.diffViewStyle === nextProps.diffViewStyle &&\n  prevProps.appName === nextProps.appName\n\nexport default React.memo(Diff, arePropsEqual)\n","import React, { useState, useCallback } from 'react'\nimport styled from '@emotion/styled'\nimport semver from 'semver'\nimport Diff from './Diff'\n\nexport const testIDs = {\n  diffSection: 'diffSection'\n}\n\nconst Title = styled.h1`\n  margin-top: 0.5em;\n`\n\nconst DiffSection = ({\n  packageName,\n  diff,\n  getDiffKey,\n  title,\n  completedDiffs,\n  isDoneSection,\n  fromVersion,\n  toVersion,\n  handleCompleteDiff,\n  selectedChanges,\n  onToggleChangeSelection,\n  diffViewStyle,\n  appName,\n  doneTitleRef\n}) => {\n  const [areAllCollapsed, setAllCollapsed] = useState(undefined)\n\n  const getIsUpgradingFrom61To62 = useCallback(() => {\n    const isUpgradingFrom61 = semver.satisfies(\n      fromVersion,\n      '>= 0.61.0 <= 0.62.0'\n    )\n\n    const isUpgradingTo62 = semver.satisfies(toVersion, '>= 0.62.0 <= 0.63.0')\n\n    return isUpgradingFrom61 && isUpgradingTo62\n  }, [fromVersion, toVersion])\n\n  const isUpgradingFrom61To62 = getIsUpgradingFrom61To62()\n\n  return (\n    <div data-testid={testIDs.diffSection}>\n      {title && completedDiffs.length > 0 && (\n        <Title ref={doneTitleRef}>{title}</Title>\n      )}\n\n      {diff.map(diffFile => {\n        const diffKey = getDiffKey(diffFile)\n        const isDiffCompleted = completedDiffs.includes(diffKey)\n\n        // If it's the \"done\" section, it shouldn't show if it's not completed\n        if (isDoneSection !== isDiffCompleted) {\n          return null\n        }\n\n        // This is here because there was a change in the line-endings of the\n        // `gradlew.bat` from version 0.61 to 0.62 which showed the entire file\n        // as a big change\n        if (\n          isUpgradingFrom61To62 &&\n          diffFile.oldPath.match(/gradlew.bat/) &&\n          diffFile.newPath.match(/gradlew.bat/)\n        ) {\n          return null\n        }\n\n        return (\n          <Diff\n            key={`${diffFile.oldRevision}${diffFile.newRevision}`}\n            {...diffFile}\n            packageName={packageName}\n            // otakustay/react-diff-view#49\n            type={diffFile.type === 'new' ? 'add' : diffFile.type}\n            diffKey={diffKey}\n            diffViewStyle={diffViewStyle}\n            fromVersion={fromVersion}\n            toVersion={toVersion}\n            isDiffCompleted={completedDiffs.includes(diffKey)}\n            onCompleteDiff={handleCompleteDiff}\n            selectedChanges={selectedChanges}\n            onToggleChangeSelection={onToggleChangeSelection}\n            areAllCollapsed={areAllCollapsed}\n            setAllCollapsed={setAllCollapsed}\n            appName={appName}\n          />\n        )\n      })}\n    </div>\n  )\n}\n\nexport default DiffSection\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { motion } from 'framer-motion'\nimport ContentLoader from 'react-content-loader'\nimport { getTransitionDuration } from '../../../utils'\n\nconst TitleLoader = () => (\n  <ContentLoader\n    speed={1}\n    backgroundColor=\"#eee\"\n    foregroundColor=\"#e6e6e6\"\n    viewBox=\"0 0 400 100\"\n  >\n    <rect width=\"250\" height=\"6\" rx=\"1.5\" />\n  </ContentLoader>\n)\n\nconst DiffLoader = () => (\n  <ContentLoader\n    speed={1}\n    backgroundColor=\"#eee\"\n    foregroundColor=\"#e6e6e6\"\n    viewBox=\"0 0 400 100\"\n  >\n    <rect x=\"0\" y=\"10\" width=\"47%\" height=\"6\" rx=\"1.5\" />\n    <rect x=\"200\" y=\"10\" width=\"41%\" height=\"6\" rx=\"1.5\" />\n    <rect x=\"0\" y=\"18\" width=\"43%\" height=\"6\" rx=\"1.5\" />\n    <rect x=\"200\" y=\"34\" width=\"40%\" height=\"6\" rx=\"1.5\" />\n    <rect x=\"200\" y=\"42\" width=\"45%\" height=\"6\" rx=\"1.5\" />\n    <rect x=\"0\" y=\"42\" width=\"40%\" height=\"6\" rx=\"1.5\" />\n    <rect x=\"0\" y=\"50\" width=\"44%\" height=\"6\" rx=\"1.5\" />\n  </ContentLoader>\n)\n\nconst Container = styled(motion.div)`\n  margin-top: 16px;\n  border: 1px solid #e8e8e8;\n  border-radius: 3px;\n`\n\nconst Header = styled.div({\n  color: '#24292e',\n  backgroundColor: '#fafbfc',\n  padding: '10px',\n  height: '40px'\n})\n\nconst DiffLoading = () => (\n  <Container\n    initial={{ opacity: 0, translateY: 100 }}\n    animate={{ opacity: 1, translateY: 0 }}\n    transition={{ duration: getTransitionDuration(0.5) }}\n  >\n    <Header>\n      <TitleLoader />\n    </Header>\n    <div\n      css={{\n        padding: '5px 10px'\n      }}\n    >\n      <DiffLoader />\n    </div>\n  </Container>\n)\n\nexport default DiffLoading\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Tooltip } from 'antd'\n\nconst UpgradeSupportAlert = styled(props => (\n  <div {...props}>\n    <span>\n      Check out{' '}\n      <Tooltip\n        placement=\"bottom\"\n        title=\"Backstage's Support is a community-backed place to request and give help.\"\n      >\n        <a\n          href=\"https://backstage.io/docs/overview/support\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          {...props}\n        >\n          Support and community\n        </a>\n      </Tooltip>{' '}\n      if you are experiencing issues related to Backstage during the upgrading\n      process.\n    </span>\n  </div>\n))`\n  padding-top: 15px;\n  span > a {\n    color: #045dc1;\n\n    &:hover {\n      color: #40a9ff;\n    }\n  }\n`\n\nexport default UpgradeSupportAlert\n","import React, { Component, Fragment } from 'react'\nimport styled from '@emotion/styled'\nimport { UpOutlined, DownOutlined } from '@ant-design/icons'\nimport { Button } from 'antd'\nimport {\n  getVersionsContentInDiff,\n  getChangelogURL,\n  getTransitionDuration\n} from '../../utils'\nimport { Link } from './Markdown'\nimport UpgradeSupportAlert from './UpgradeSupportAlert'\n// import AppNameWarning from './AppNameWarning'\nimport { motion } from 'framer-motion'\nimport { PACKAGE_NAMES } from '../../constants'\nimport { ReleasesContext } from '../../ReleaseProvider'\n\nconst Container = styled.div`\n  position: relative;\n  margin-top: 16px;\n  color: rgba(0, 0, 0, 0.65);\n  overflow: hidden;\n`\n\nconst InnerContainer = styled.div`\n  color: rgba(0, 0, 0, 0.65);\n  background-color: #fffbe6;\n  border-width: 1px;\n  border-left-width: 7px;\n  border-color: #ffe58f;\n  border-style: solid;\n  border-radius: 3px;\n  transition: padding 0.25s ease-out;\n`\n\nconst Title = styled(({ isContentVisible, ...props }) => (\n  <motion.h2\n    {...props}\n    variants={{\n      visibleContent: {\n        translateX: 0,\n        translateY: 0\n      },\n      hiddenContent: {\n        translateX: -5,\n        translateY: -10\n      }\n    }}\n    initial={isContentVisible ? 'visibleContent' : 'hiddenContent'}\n    animate={isContentVisible ? 'visibleContent' : 'hiddenContent'}\n    transition={{\n      duration: getTransitionDuration(0.25)\n    }}\n    inherit={false}\n  />\n))`\n  font-size: 17px;\n  cursor: pointer;\n  margin: 0px;\n  padding: 18px 0px 0px 14px;\n`\n\nconst ContentContainer = styled(({ isContentVisible, children, ...props }) => (\n  <motion.div\n    {...props}\n    variants={{\n      visible: {\n        opacity: 1,\n        height: 'auto',\n        translateY: 0\n      },\n      hidden: { opacity: 0, height: 0, translateY: -20 }\n    }}\n    initial={isContentVisible ? 'visible' : 'hidden'}\n    animate={isContentVisible ? 'visible' : 'hidden'}\n    transition={{\n      duration: getTransitionDuration(0.25)\n    }}\n    inherit={false}\n  >\n    <div children={children} />\n  </motion.div>\n))`\n  & > div {\n    padding: 15px 24px 19px;\n  }\n`\n\nconst Icon = styled(props => (\n  <span {...props} role=\"img\" aria-label=\"Megaphone emoji\">\n    \n  </span>\n))`\n  margin: 0px 10px;\n`\n\nconst HideContentButton = styled(\n  ({ toggleContentVisibility, isContentVisible, ...props }) => (\n    <Button\n      {...props}\n      type=\"link\"\n      icon={isContentVisible ? <UpOutlined /> : <DownOutlined />}\n      onClick={toggleContentVisibility}\n    />\n  )\n)`\n  float: right;\n  position: absolute;\n  top: 11px;\n  right: 12px;\n  font-size: 12px;\n  border-width: 0px;\n  width: 20px;\n  height: 20px;\n  color: rgba(0, 0, 0, 0.45);\n  &:hover,\n  &:focus {\n    color: #24292e;\n  }\n`\n\nconst Separator = styled.hr`\n  margin: 15px 0;\n  background-color: #e1e4e8;\n  height: 0.25em;\n  border: 0;\n`\n\nconst List = styled.ol`\n  padding-inline-start: 18px;\n  margin: 10px 0 0;\n`\n\nclass UsefulContentSection extends Component {\n  state = {\n    isContentVisible: false\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // Only re-render component if it has reloaded the diff on the parent\n    const hasLoaded = this.props.isLoading && !nextProps.isLoading\n    // or if the content has been hidden\n    const hasContentBeenHidden =\n      this.state.isContentVisible !== nextState.isContentVisible\n\n    return hasLoaded || hasContentBeenHidden\n  }\n\n  handleToggleContentVisibility = () =>\n    this.setState(({ isContentVisible }) => ({\n      isContentVisible: !isContentVisible\n    }))\n\n  getChangelog = ({ version }) => {\n    const { packageName } = this.props\n    const { to } = this.context\n    const { version: toVersion } = to\n    if (\n      packageName === PACKAGE_NAMES.RNW ||\n      packageName === PACKAGE_NAMES.RNM\n    ) {\n      return {\n        title: `React Native ${\n          packageName === PACKAGE_NAMES.RNW ? 'Windows' : 'macOS'\n        } ${toVersion} changelog`,\n        url: getChangelogURL({\n          packageName,\n          version: toVersion\n        }),\n        version: toVersion\n      }\n    }\n    if (packageName === PACKAGE_NAMES.BACKSTAGE) {\n      return {\n        title: `Backstage ${version} changelog`,\n        url: getChangelogURL({\n          packageName,\n          version\n        }),\n        version\n      }\n    }\n\n    const versionWithoutEndingZero = version.slice(0, 4)\n\n    return {\n      title: `React Native ${versionWithoutEndingZero} changelog`,\n      url: getChangelogURL({\n        packageName,\n        version: versionWithoutEndingZero\n      }),\n      version: versionWithoutEndingZero\n    }\n  }\n\n  render() {\n    const { isContentVisible } = this.state\n\n    const versions = getVersionsContentInDiff({\n      fromVersion: this.context.from.version,\n      toVersion: this.context.to.version,\n      versions: this.context.releases\n    })\n\n    const hasMoreThanOneRelease = versions.length > 1\n\n    return (\n      <Container isContentVisible={isContentVisible}>\n        <InnerContainer isContentVisible={isContentVisible}>\n          <Title\n            isContentVisible={isContentVisible}\n            onClick={this.handleToggleContentVisibility}\n          >\n            <Icon /> Useful content for upgrading\n          </Title>\n\n          <HideContentButton\n            isContentVisible={isContentVisible}\n            toggleContentVisibility={this.handleToggleContentVisibility}\n          />\n\n          <ContentContainer isContentVisible={isContentVisible}>\n            {versions.map(({ usefulContent, version }, key) => {\n              const changelog = this.getChangelog({ version })\n\n              const links = [...(usefulContent?.links || []), changelog]\n\n              return (\n                <Fragment key={key}>\n                  {key > 0 && <Separator />}\n\n                  {hasMoreThanOneRelease && (\n                    <h3>Release {changelog.version}</h3>\n                  )}\n\n                  <span>{usefulContent?.description}</span>\n\n                  <List>\n                    {links.map(({ url, title }, key) => (\n                      <li key={`${url}${key}`}>\n                        <Link href={url}>{title}</Link>\n                      </li>\n                    ))}\n                  </List>\n                </Fragment>\n              )\n            })}\n\n            <UpgradeSupportAlert />\n            {/*\n            <Separator />\n\n             <AppNameWarning /> */}\n          </ContentContainer>\n        </InnerContainer>\n      </Container>\n    )\n  }\n}\n\nUsefulContentSection.contextType = ReleasesContext\n\nexport default UsefulContentSection\n","import React from 'react'\nimport { Button, Popover as AntdPopover, Tooltip } from 'antd'\nimport styled from '@emotion/styled'\nimport DownloadFileButton from './DownloadFileButton'\nimport { removeAppPathPrefix } from '../../utils'\n\nconst Container = styled.div`\n  padding-right: 10px;\n`\n\nconst BinaryRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ${({ index }) => (index % 2 === 0 ? '#fafbfc' : '#ffffff')};\n  color: #24292e;\n  font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier,\n    monospace;\n  font-size: 12px;\n  width: 500px;\n  max-width: 500px;\n  padding: 10px 15px;\n  border-bottom: 1px solid #e1e4e8;\n`\n\nconst Popover = styled(({ className, ...props }) => (\n  <AntdPopover overlayClassName={className} {...props} />\n))`\n  .ant-popover-inner-content {\n    padding: 0;\n    background: red;\n  }\n`\n\nconst BinaryList = ({ binaryFiles, toVersion, appName, packageName }) =>\n  binaryFiles.map(({ newPath }, index) => {\n    return (\n      <BinaryRow key={index} index={index}>\n        {removeAppPathPrefix(newPath, appName)}\n\n        <DownloadFileButton\n          visible={true}\n          version={toVersion}\n          path={newPath}\n          packageName={packageName}\n        />\n      </BinaryRow>\n    )\n  })\n\nconst BinaryDownload = ({\n  diff,\n  fromVersion,\n  toVersion,\n  appName,\n  packageName\n}) => {\n  const binaryFiles = diff.filter(\n    ({ hunks, type }) => hunks.length === 0 && type !== 'delete'\n  )\n\n  if (binaryFiles.length === 0) {\n    return null\n  }\n\n  return (\n    <Container>\n      <Popover\n        placement=\"bottomRight\"\n        content={\n          <BinaryList\n            binaryFiles={binaryFiles}\n            toVersion={toVersion}\n            appName={appName}\n            packageName={packageName}\n          />\n        }\n        trigger=\"click\"\n      >\n        <Tooltip\n          placement=\"top\"\n          title=\"Binaries updated within the version range\"\n        >\n          <Button>Binaries</Button>\n        </Tooltip>\n      </Popover>\n    </Container>\n  )\n}\n\nexport default BinaryDownload\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Radio } from 'antd'\n\nconst DiffViewStyleOptions = styled(\n  ({ handleViewStyleChange, diffViewStyle }) => (\n    <Radio.Group value={diffViewStyle}>\n      <Radio.Button\n        value=\"split\"\n        onChange={() => handleViewStyleChange('split')}\n      >\n        Split\n      </Radio.Button>\n      <Radio.Button\n        value=\"unified\"\n        onChange={() => handleViewStyleChange('unified')}\n      >\n        Unified\n      </Radio.Button>\n    </Radio.Group>\n  )\n)`\n  float: right;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  font-size: 12px;\n  border-width: 0px;\n  width: 20px;\n  height: 20px;\n  margin-right: 8px;\n  &,\n  &:hover,\n  &:focus {\n    color: #24292e;\n  }\n`\nexport default DiffViewStyleOptions\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { keyframes, css } from '@emotion/core'\nimport Confetti from 'react-dom-confetti'\nimport { Popover } from 'antd'\n\nconst shake = keyframes`\n  0% {\n    transform: translate(0, 0);\n  }\n\n  10%, 90% {\n    transform: translate(0, -2px);\n  }\n\n  20%, 80% {\n    transform: translate(0, 3px);\n  }\n\n  30%, 50%, 70% {\n    transform: translate(0, -5px);\n  }\n\n  40%, 60% {\n    transform: translate(0, 5px);\n  }\n`\n\nconst CompletedFilesCounter = styled(\n  ({ completed, total, popoverContent, popoverCursorType, ...props }) => (\n    <div {...props}>\n      <Popover\n        content={popoverContent}\n        trigger=\"hover\"\n        placement=\"right\"\n        overlayStyle={{\n          position: 'fixed'\n        }}\n      >\n        <span className=\"completedAmount\">\n          {completed === 0 ? 1 : completed}\n        </span>{' '}\n        /{total}\n      </Popover>\n      <Confetti\n        active={completed === total}\n        config={{\n          elementCount: 200,\n          angle: 130,\n          startVelocity: 30\n        }}\n      />\n    </div>\n  )\n)`\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  background: #d5eafd;\n  padding: 10px;\n  border: 1px solid #1890ff;\n  border-radius: 20px;\n  color: #7dadda;\n  transform: ${({ completed }) =>\n    completed ? 'translateY(0px)' : 'translateY(70px)'};\n  display: flex;\n  align-self: flex-end;\n  transition: transform 0.3s;\n  cursor: ${({ popoverCursorType }) => popoverCursorType};\n  ${({ completed, total }) =>\n    completed === total &&\n    css`\n      transform: translateY(70px);\n      animation: ${shake};\n      animation-duration: 1.5s;\n    `}\n\n  .completedAmount {\n    color: #1890ff;\n  }\n`\n\nexport default CompletedFilesCounter\n","import React from 'react'\nimport styled from '@emotion/styled'\nimport { Button as AntdButton } from 'antd'\nimport { getDiffURL } from '../../utils'\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n  top: 10px;\n  font-size: 12px;\n  border-width: 0px;\n  height: 20px;\n`\n\nconst Button = styled(AntdButton)`\n  border-radius: 3px;\n  line-height: 30px;\n`\n\nconst RawDiffLinkButton = ({\n  packageName,\n  language,\n  fromVersion,\n  toVersion\n}) => {\n  if (fromVersion === '') {\n    return null\n  }\n  const diffURL = getDiffURL({\n    packageName,\n    language,\n    fromVersion,\n    toVersion\n  })\n  return (\n    <Container>\n      <Button href={diffURL} type=\"link\">\n        View raw diff\n      </Button>\n    </Container>\n  )\n}\n\nexport default RawDiffLinkButton\n","import { useEffect, useState } from 'react'\nimport { parseDiff } from 'react-diff-view'\nimport { getDiffURL } from '../utils'\n\nconst delay = ms => new Promise(res => setTimeout(res, ms))\n\nconst movePackageJsonToTop = parsedDiff =>\n  parsedDiff.sort(({ newPath }) => (newPath.includes('package.json') ? -1 : 1))\n\nexport const useFetchDiff = ({\n  shouldShowDiff,\n  packageName,\n  language,\n  fromVersion,\n  toVersion\n}) => {\n  const [isLoading, setIsLoading] = useState(true)\n  const [isDone, setIsDone] = useState(false)\n  const [diff, setDiff] = useState(undefined)\n\n  useEffect(() => {\n    const fetchDiff = async () => {\n      setIsLoading(true)\n      setIsDone(false)\n\n      const [response] = await Promise.all([\n        fetch(getDiffURL({ packageName, language, fromVersion, toVersion })),\n        delay(300)\n      ])\n\n      const diff = await response.text()\n\n      setDiff(movePackageJsonToTop(parseDiff(diff)))\n\n      setIsLoading(false)\n      setIsDone(true)\n\n      return\n    }\n\n    if (shouldShowDiff) {\n      fetchDiff()\n    }\n  }, [shouldShowDiff, packageName, language, fromVersion, toVersion])\n\n  return {\n    isLoading,\n    isDone,\n    diff\n  }\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport styled from '@emotion/styled'\nimport { Alert } from 'antd'\nimport { motion, AnimatePresence, AnimateSharedLayout } from 'framer-motion'\nimport { withChangeSelect } from 'react-diff-view'\nimport 'react-diff-view/style/index.css'\nimport { getTransitionDuration } from '../../utils'\nimport DiffSection from './Diff/DiffSection'\nimport DiffLoading from './Diff/DiffLoading'\nimport UsefulContentSection from './UsefulContentSection'\nimport BinaryDownload from './BinaryDownload'\nimport ViewStyleOptions from './Diff/DiffViewStyleOptions'\nimport CompletedFilesCounter from './CompletedFilesCounter'\nimport RawDiffLinkButton from './RawDiffLinkButton'\nimport { useFetchDiff } from '../../hooks/fetch-diff'\n\nconst Container = styled.div`\n  width: 90%;\n`\n\nconst TopContainer = styled.div`\n  display: flex;\n  position: relative;\n  border-width: 1px;\n  margin-top: 16px;\n  flex-direction: row;\n  justify-content: flex-end;\n`\n\nconst getDiffKey = ({ oldRevision, newRevision }) =>\n  `${oldRevision}${newRevision}`\n\nconst scrollToRef = ref => ref.current.scrollIntoView({ behavior: 'smooth' })\n\nconst DiffViewer = ({\n  packageName,\n  language,\n  fromVersion,\n  toVersion,\n  shouldShowDiff,\n  selectedChanges,\n  onToggleChangeSelection,\n  appName\n}) => {\n  const { isLoading, isDone, diff } = useFetchDiff({\n    shouldShowDiff,\n    packageName,\n    language,\n    fromVersion,\n    toVersion\n  })\n  const [completedDiffs, setCompletedDiffs] = useState([])\n  const [isGoToDoneClicked, setIsGoToDoneClicked] = useState(false)\n  const donePopoverPossibleOpts = {\n    done: {\n      content: 'Scroll to Done section',\n      cursorType: 's-resize'\n    },\n    top: {\n      content: 'Scroll to Top',\n      cursorType: 'n-resize'\n    }\n  }\n  const [donePopoverOpts, setDonePopoverOpts] = useState(\n    donePopoverPossibleOpts.done\n  )\n  const doneTitleRef = useRef(null)\n\n  const scrollToDone = () => scrollToRef(doneTitleRef)\n  const scrollToTop = () => window.scrollTo({ top: 0, behavior: 'smooth' })\n\n  const handleCompletedFilesCounterClick = () => {\n    setIsGoToDoneClicked(!isGoToDoneClicked)\n    if (isGoToDoneClicked) {\n      setDonePopoverOpts(donePopoverPossibleOpts.done)\n      scrollToTop()\n    } else {\n      setDonePopoverOpts(donePopoverPossibleOpts.top)\n      scrollToDone()\n    }\n  }\n\n  const handleCompleteDiff = diffKey => {\n    if (completedDiffs.includes(diffKey)) {\n      return setCompletedDiffs(prevCompletedDiffs =>\n        prevCompletedDiffs.filter(completedDiff => completedDiff !== diffKey)\n      )\n    }\n\n    setCompletedDiffs(prevCompletedDiffs => [...prevCompletedDiffs, diffKey])\n  }\n\n  const renderUpgradeDoneMessage = ({ diff, completedDiffs }) =>\n    diff.length === completedDiffs.length && (\n      <Alert\n        style={{ marginTop: 16 }}\n        message=\"Your upgrade is done \"\n        type=\"success\"\n        showIcon\n        closable\n      />\n    )\n\n  const resetCompletedDiffs = () => setCompletedDiffs([])\n\n  const [diffViewStyle, setViewStyle] = useState(\n    localStorage.getItem('viewStyle') || 'split'\n  )\n\n  const handleViewStyleChange = newViewStyle => {\n    setViewStyle(newViewStyle)\n    localStorage.setItem('viewStyle', newViewStyle)\n  }\n\n  useEffect(() => {\n    if (!isDone) {\n      resetCompletedDiffs()\n    }\n  }, [isDone])\n\n  if (!shouldShowDiff) {\n    return null\n  }\n\n  if (isLoading) {\n    return (\n      <Container>\n        <AnimatePresence>\n          <DiffLoading />\n        </AnimatePresence>\n      </Container>\n    )\n  }\n\n  const diffSectionProps = {\n    diff: diff,\n    getDiffKey: getDiffKey,\n    completedDiffs: completedDiffs,\n    fromVersion: fromVersion,\n    toVersion: toVersion,\n    handleCompleteDiff: handleCompleteDiff,\n    selectedChanges: selectedChanges,\n    onToggleChangeSelection: onToggleChangeSelection\n  }\n\n  return (\n    <Container>\n      <AnimateSharedLayout>\n        <motion.div\n          initial={{ opacity: 0, translateY: 75 }}\n          animate={{ opacity: 1, translateY: 0 }}\n          transition={{ duration: getTransitionDuration(0.5) }}\n        >\n          <UsefulContentSection\n            isLoading={isLoading}\n            packageName={packageName}\n            fromVersion={fromVersion}\n            toVersion={toVersion}\n          />\n\n          <TopContainer>\n            <BinaryDownload\n              diff={diff}\n              fromVersion={fromVersion}\n              toVersion={toVersion}\n              appName={appName}\n              packageName={packageName}\n            />\n\n            <RawDiffLinkButton\n              packageName={packageName}\n              language={language}\n              fromVersion={fromVersion}\n              toVersion={toVersion}\n            />\n\n            <ViewStyleOptions\n              handleViewStyleChange={handleViewStyleChange}\n              diffViewStyle={diffViewStyle}\n            />\n          </TopContainer>\n\n          <DiffSection\n            {...diffSectionProps}\n            packageName={packageName}\n            isDoneSection={false}\n            diffViewStyle={diffViewStyle}\n            appName={appName}\n          />\n\n          {renderUpgradeDoneMessage({ diff, completedDiffs })}\n\n          <DiffSection\n            {...diffSectionProps}\n            packageName={packageName}\n            isDoneSection={true}\n            title=\"Done\"\n            appName={appName}\n            doneTitleRef={doneTitleRef}\n          />\n        </motion.div>\n      </AnimateSharedLayout>\n\n      <CompletedFilesCounter\n        completed={completedDiffs.length}\n        total={diff.length}\n        onClick={handleCompletedFilesCounterClick}\n        popoverContent={donePopoverOpts.content}\n        popoverCursorType={donePopoverOpts.cursorType}\n      />\n    </Container>\n  )\n}\n\nexport default withChangeSelect({ multiple: true })(DiffViewer)\n","import React, { useEffect, useRef } from 'react'\nimport styled from '@emotion/styled'\nimport { Link } from './Markdown'\nimport { motion, useAnimation } from 'framer-motion'\nimport { css } from '@emotion/core'\n\nconst TROUBLESHOOTING_GUIDES = [\n  {\n    title: 'Xcode 12.5',\n    href: 'https://github.com/facebook/react-native/issues/31480'\n  },\n  {\n    title: 'Apple Silicon (M1)',\n    href: 'https://github.com/facebook/react-native/issues/31941'\n  }\n]\n\nconst Container = styled(motion.div)`\n  ${({ willHaveAnimation }) =>\n    !willHaveAnimation &&\n    css`\n      width: 250px;\n    `}\n`\n\nconst Content = styled(motion.div)`\n  ${({ willHaveAnimation }) =>\n    willHaveAnimation &&\n    css`\n      display: none;\n      opacity: 0;\n      height: 0;\n    `}\n\n  h4 {\n    border-bottom: 1px solid #e8e8e8;\n    padding-bottom: 6px;\n  }\n`\n\nconst ListContainer = styled.ul`\n  padding-left: 13px;\n  margin-bottom: 0;\n  list-style: disc;\n`\n\nconst TroubleshootingGuides = ({ isTooltipVisible, hasSeenTooltip }) => {\n  const hasAnimated = useRef(false)\n  const willHaveAnimation = useRef(isTooltipVisible || hasAnimated.current)\n\n  const containerAnimation = useAnimation()\n  const tooltipAnimation = useAnimation()\n  const contentAnimation = useAnimation()\n\n  useEffect(() => {\n    if (!isTooltipVisible && !hasAnimated.current) {\n      startTroubleshootingAnimation()\n\n      return\n    }\n\n    if (hasSeenTooltip) {\n      hasAnimated.current = true\n    }\n  }, [isTooltipVisible])\n\n  const startTroubleshootingAnimation = async () => {\n    if (willHaveAnimation) {\n      await Promise.all([\n        contentAnimation.start({\n          display: 'initial',\n          transition: { duration: 0 }\n        }),\n        tooltipAnimation.start({ opacity: 0, transition: { duration: 0.2 } }),\n        containerAnimation.start({\n          width: 250,\n          transition: { duration: 0.2, delay: 0.2 }\n        }),\n        tooltipAnimation.start({\n          height: 0,\n          transition: { duration: 0.2 }\n        }),\n        contentAnimation.start({\n          height: 'auto',\n          transition: { duration: 0.2 }\n        }),\n        contentAnimation.start({\n          opacity: 1,\n          transition: { duration: 0.5, delay: 0.3 }\n        })\n      ])\n      await tooltipAnimation.start({ display: 'none' })\n    }\n\n    hasAnimated.current = true\n  }\n\n  return (\n    <Container\n      willHaveAnimation={willHaveAnimation.current}\n      animate={containerAnimation}\n    >\n      <motion.div animate={tooltipAnimation}>\n        <span>\n          Check here the troubleshooting guides for issues with Xcode 12.5 or\n          Apple Silicon (M1) machine.\n        </span>\n      </motion.div>\n\n      <Content\n        willHaveAnimation={willHaveAnimation.current}\n        animate={contentAnimation}\n      >\n        <>\n          <h4>Troubleshooting guides</h4>\n          <ListContainer>\n            {TROUBLESHOOTING_GUIDES.map(({ title, href }) => (\n              <li key={href}>\n                <Link href={href}>{title}</Link>\n              </li>\n            ))}\n          </ListContainer>\n        </>\n      </Content>\n    </Container>\n  )\n}\n\nexport { TroubleshootingGuides }\n","import React, { useEffect, useRef, useState } from 'react'\nimport { Button as AntdButton, Popover } from 'antd'\nimport styled from '@emotion/styled'\nimport createPersistedState from 'use-persisted-state'\nimport { differenceInDays } from 'date-fns'\nimport { TroubleshootingGuides } from './TroubleshootingGuides'\n\nexport const testIDs = {\n  troubleshootingGuidesButton: 'troubleshootingGuidesButton'\n}\n\nconst useTooltip = createPersistedState('troubleshootingTooltip')\n\nconst Icon = styled.span`\n  font-family: initial;\n`\n\nconst Button = styled(AntdButton)`\n  width: 32px;\n  padding: 0;\n  color: initial;\n`\n\nconst TroubleshootingGuidesButton = () => {\n  const [showContent, setShowContent] = useState(false)\n  const [\n    shouldShowTroubleshootingGuide,\n    setShouldShowTroubleshootingGuide\n  ] = useState(false)\n  const [tooltip, setTooltip] = useTooltip({\n    hasSeen: false,\n    hasSeenAt: undefined\n  })\n  const [isTooltipVisible, setIsTooltipVisible] = useState(false)\n  const hasHandledClick = useRef(false)\n\n  useEffect(() => {\n    if (!tooltip.hasSeen) {\n      setIsTooltipVisible(true)\n      setShowContent(true)\n\n      return\n    }\n\n    const diffInDays = differenceInDays(new Date(), new Date(tooltip.hasSeenAt))\n\n    if (diffInDays >= 2) {\n      setTooltip({ hasSeen: false, hasSeenAt: undefined })\n    }\n  }, [tooltip])\n\n  const handlePopoverVisibilityChange = visibility => {\n    if (hasHandledClick.current) {\n      return\n    }\n\n    setShowContent(false)\n  }\n\n  const handleToggleShowContent = () => {\n    hasHandledClick.current = true\n\n    if (!showContent) {\n      setShowContent(true)\n    } else if (isTooltipVisible) {\n      setIsTooltipVisible(false)\n      setShouldShowTroubleshootingGuide(!shouldShowTroubleshootingGuide)\n      setTooltip({ hasSeen: true, hasSeenAt: new Date().toISOString() })\n    } else {\n      setShowContent(!showContent)\n    }\n\n    setTimeout(() => {\n      hasHandledClick.current = false\n    }, 0)\n  }\n\n  return (\n    <Popover\n      placement=\"bottomRight\"\n      content={\n        <TroubleshootingGuides\n          isTooltipVisible={isTooltipVisible}\n          hasSeenTooltip={tooltip.hasSeen}\n        />\n      }\n      trigger=\"click\"\n      visible={showContent}\n      onVisibleChange={handlePopoverVisibilityChange}\n    >\n      <Button\n        data-testid={testIDs.troubleshootingGuidesButton}\n        onClick={handleToggleShowContent}\n      >\n        <Icon role=\"img\"></Icon>\n      </Button>\n    </Popover>\n  )\n}\n\nexport { TroubleshootingGuidesButton }\n","import React, { useState, useEffect } from 'react'\nimport styled from '@emotion/styled'\nimport { Card } from 'antd'\nimport GitHubButton from 'react-github-btn'\n// import ReactGA from 'react-ga'\nimport VersionSelector from '../common/VersionSelector'\nimport DiffViewer from '../common/DiffViewer'\n// import Settings from '../common/Settings'\nimport { homepage } from '../../../package.json'\nimport logo from '../../assets/logo.svg'\nimport { SHOW_LATEST_RCS } from '../../utils'\nimport { useGetLanguageFromURL } from '../../hooks/get-language-from-url'\nimport { useGetPackageNameFromURL } from '../../hooks/get-package-name-from-url'\nimport { PACKAGE_NAMES } from '../../constants'\nimport { TroubleshootingGuidesButton } from '../common/TroubleshootingGuidesButton'\nimport { updateURL } from '../../utils/update-url'\nimport { deviceSizes } from '../../utils/device-sizes'\nimport { ReleasesProvider } from '../../ReleaseProvider'\n\nconst Page = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding-top: 30px;\n`\n\nconst Container = styled(Card)`\n  width: 90%;\n  border-radius: 3px;\n  border-color: #e8e8e8;\n`\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  @media ${deviceSizes.tablet} {\n    flex-direction: row;\n  }\n`\n\nconst LogoImg = styled.img`\n  width: 50px;\n  margin-bottom: 15px;\n\n  @media ${deviceSizes.tablet} {\n    width: 50px;\n  }\n`\n\nconst TitleHeader = styled.h1`\n  margin: 0;\n  margin-left: 15px;\n`\n\nconst TitleContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n`\n\nconst SettingsContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 15px;\n  margin-bottom: 8px;\n  flex: 1;\n`\n\nconst StarButton = styled(({ className, ...props }) => (\n  <div className={className}>\n    <GitHubButton {...props} />\n  </div>\n))`\n  margin-top: 10px;\n  margin-left: 15px;\n  margin-right: auto;\n`\n\nconst Home = () => {\n  const {\n    packageName: defaultPackageName,\n    isPackageNameDefinedInURL\n  } = useGetPackageNameFromURL()\n  const defaultLanguage = useGetLanguageFromURL()\n  const [packageName, setPackageName] = useState(defaultPackageName)\n  const [language, setLanguage] = useState(defaultLanguage)\n  const [fromVersion, setFromVersion] = useState('')\n  const [toVersion, setToVersion] = useState('')\n  const [shouldShowDiff, setShouldShowDiff] = useState(false)\n  // const [releases, setReleases] = useState({})\n  const [settings, setSettings] = useState({\n    [`${SHOW_LATEST_RCS}`]: false\n  })\n  const [appName /* setAppName */] = useState('')\n\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'production') {\n      // ReactGA.initialize('UA-136307971-1')\n      // ReactGA.pageview('/')\n    }\n  }, [])\n\n  const handleShowDiff = ({ fromVersion, toVersion }) => {\n    if (fromVersion === toVersion) {\n      return\n    }\n\n    setFromVersion(fromVersion)\n    setToVersion(toVersion)\n    setShouldShowDiff(true)\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  const handlePackageNameAndLanguageChange = ({\n    newPackageName,\n    newLanguage\n  }) => {\n    let localPackageName =\n      newPackageName === undefined ? packageName : newPackageName\n    let localLanguage = newLanguage === undefined ? language : newLanguage\n\n    updateURL({\n      packageName: localPackageName,\n      language: localLanguage,\n      isPackageNameDefinedInURL:\n        isPackageNameDefinedInURL || newPackageName !== undefined,\n      toVersion: '',\n      fromVersion: ''\n    })\n    setPackageName(localPackageName)\n    setLanguage(localLanguage)\n    setFromVersion('')\n    setToVersion('')\n    setShouldShowDiff(false)\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  const handleSettingsChange = settingsValues => {\n    const normalizedIncomingSettings = settingsValues.reduce((acc, val) => {\n      acc[val] = true\n      return acc\n    }, {})\n\n    setSettings(normalizedIncomingSettings)\n  }\n\n  return (\n    <ReleasesProvider packageName={packageName}>\n      <Page>\n        <Container>\n          <HeaderContainer>\n            <TitleContainer>\n              <LogoImg alt=\"Backstage logo\" title=\"Backstage logo\" src={logo} />\n\n              <a href={homepage}>\n                <TitleHeader>Backstage Upgrade Helper</TitleHeader>\n              </a>\n            </TitleContainer>\n            <SettingsContainer>\n              <StarButton\n                href=\"https://github.com/backstage/upgrade-helper\"\n                data-icon=\"octicon-star\"\n                data-show-count=\"true\"\n                aria-label=\"Star backstage/upgrade-helper on GitHub\"\n              >\n                Star\n              </StarButton>\n\n              {packageName === PACKAGE_NAMES.RN && (\n                <TroubleshootingGuidesButton />\n              )}\n              {/*\n            <Settings\n              handleSettingsChange={handleSettingsChange}\n              appName={appName}\n              packageName={packageName}\n              onChangePackageNameAndLanguage={\n                handlePackageNameAndLanguageChange\n              }\n              language={language}\n              onChangeAppName={setAppName}\n            />*/}\n            </SettingsContainer>\n          </HeaderContainer>\n\n          <VersionSelector\n            key={packageName}\n            showDiff={handleShowDiff}\n            showReleaseCandidates={settings[SHOW_LATEST_RCS]}\n            fromVersion={fromVersion}\n            toVersion={toVersion}\n            packageName={packageName}\n            language={language}\n            isPackageNameDefinedInURL={isPackageNameDefinedInURL}\n          />\n        </Container>\n        <DiffViewer\n          shouldShowDiff={shouldShowDiff}\n          fromVersion={fromVersion}\n          toVersion={toVersion}\n          appName={appName}\n          packageName={packageName}\n          language={language}\n        />\n      </Page>\n    </ReleasesProvider>\n  )\n}\n\nexport default Home\n","import { PACKAGE_NAMES } from '../constants'\n\nexport const useGetPackageNameFromURL = () => {\n  const urlParams = new URLSearchParams(window.location.search)\n\n  const packageNameFromURL = urlParams.get('package')\n  const packageNames = Object.values(PACKAGE_NAMES)\n\n  if (!packageNameFromURL || !packageNames.includes(packageNameFromURL)) {\n    return {\n      packageName: PACKAGE_NAMES.BACKSTAGE,\n      isPackageNameDefinedInURL: false\n    }\n  }\n\n  return {\n    packageName: packageNameFromURL,\n    isPackageNameDefinedInURL: true\n  }\n}\n","import { LANGUAGE_NAMES } from '../constants'\n\nexport const useGetLanguageFromURL = () => {\n  const urlParams = new URLSearchParams(window.location.search)\n\n  const languageFromURL = urlParams.get('language')\n  const languageNames = Object.values(LANGUAGE_NAMES)\n\n  if (!languageFromURL || !languageNames.includes(languageFromURL)) {\n    return LANGUAGE_NAMES.CPP\n  }\n\n  return languageFromURL\n}\n","import React from 'react'\nimport Home from './components/pages/Home'\n\nconst App = () => <Home />\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}